(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{12:function(e,t,a){e.exports={side:"TodoSide_side__3aIuj",width:"TodoSide_width__1e7eR",heading:"TodoSide_heading__3HBt9",wrapper:"TodoSide_wrapper__3LGiP",title:"TodoSide_title__hktfj",bar:"TodoSide_bar__19gNn",tags:"TodoSide_tags__3uCGA",tagIcon:"TodoSide_tagIcon__etxJh",list:"TodoSide_list__1S7sM",tag:"TodoSide_tag__2-3i3",cross:"TodoSide_cross__3oMqv",addTag:"TodoSide_addTag__2j8dI",inputAddTag:"TodoSide_inputAddTag__3FNsO",text:"TodoSide_text__U7-Se",textarea:"TodoSide_textarea__2PLzG",options:"TodoSide_options__2IyvQ",update:"TodoSide_update__OXHZE",added:"TodoSide_added__3X0fm",close:"TodoSide_close__3NrWa",delete:"TodoSide_delete__2nzik",trash:"TodoSide_trash__1KgWN"}},13:function(e,t,a){e.exports={item:"TodoItem_item__2eLmc",status:"TodoItem_status__2zDCs",bar:"TodoItem_bar__btzdv",title:"TodoItem_title__1058v",tags:"TodoItem_tags__1p-Vo",tag:"TodoItem_tag__-PGj4",bottom:"TodoItem_bottom__3gd0Q",line:"TodoItem_line__2hlMt",text:"TodoItem_text__3uwJA",main:"TodoItem_main__36zuw",content:"TodoItem_content__2_yaG",edit:"TodoItem_edit__3Zuv2",settings:"TodoItem_settings__3DhpD",setting:"TodoItem_setting__3b9tH",important:"TodoItem_important__I_0d_",date:"TodoItem_date__2qUDQ"}},24:function(e,t,a){e.exports={header:"TodoHeader_header__-1bBJ",buttons:"TodoHeader_buttons__2EgjU",button:"TodoHeader_button__nYymV",bell:"TodoHeader_bell__3BNHO",settings:"TodoHeader_settings__27jZG",logout:"TodoHeader_logout__EYdGB"}},25:function(e,t,a){e.exports={"login-page":"TodoSignup_login-page__3jjqA",login:"TodoSignup_login__1uwpR",message:"TodoSignup_message__1_dfX",create:"TodoSignup_create__2mvo_",button:"TodoSignup_button__GU6EL",username:"TodoSignup_username__2XKRY",email:"TodoSignup_email__vE9uK",password:"TodoSignup_password__EN8oi",symbols:"TodoSignup_symbols__Y6Io0"}},31:function(e,t,a){e.exports={"login-page":"TodoLogin_login-page__tE6Ba",login:"TodoLogin_login__3oFiN",message:"TodoLogin_message__jeMWS",create:"TodoLogin_create__3X8pY",button:"TodoLogin_button__2-7w0"}},36:function(e,t,a){e.exports={list:"TodoList_list__1GpJj",loading:"TodoList_loading__1_h70",recommend:"TodoList_recommend__3MBmx"}},39:function(e,t,a){e.exports={button:"TodoSort_button__2w63h",active:"TodoSort_active__2uAd8",sup:"TodoSort_sup__KGJ4c"}},40:function(e,t,a){e.exports={inputs:"TodoInputs_inputs__1vwTZ",add:"TodoInputs_add__2VNsn",list:"TodoInputs_list__1BiMv",button:"TodoInputs_button__3MBkb",active:"TodoInputs_active__3rWid"}},43:function(e,t,a){e.exports={title:"TodoTitle_title__mmDb0",text:"TodoTitle_text__14WDR"}},49:function(e,t,a){e.exports={side:"TodoMenu_side__plj1c"}},50:function(e,t,a){e.exports={content:"TodoContent_content__19vpP"}},51:function(e,t,a){e.exports={filter:"TodoFilter_filter__17wRG"}},67:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var s=a(2),o=a.n(s),n=a(28),i=a.n(n),d=a(27),c=a(16),r=a(47),l=a(48),u=a(15),h=a(60),g=a(59),m=(a(67),a(24)),j=a.n(m),b=a(3),p=function(e){var t=e.isAuth,a=e.email,s=e.handleLogout;return Object(b.jsx)("header",{className:j.a.header,children:Object(b.jsxs)("div",{className:j.a.buttons,children:[t&&Object(b.jsx)("span",{className:j.a.email,children:a}),Object(b.jsx)("button",{className:"".concat(j.a.bell," ").concat(j.a.button),style:{background:"url(images/bell.png) no-repeat center center / cover"}}),Object(b.jsx)("button",{className:"".concat(j.a.settings," ").concat(j.a.button),style:{background:"url(images/settings.png) no-repeat  center center / cover"}}),t&&Object(b.jsx)("button",{className:"".concat(j.a.logout," ").concat(j.a.button),style:{background:"url(images/logout.png) no-repeat center center / cover"},onClick:s})]})})},_=a(49),T=a.n(_),f=function(){return Object(b.jsx)("section",{className:T.a.side})},O=a(50),x=a.n(O),v=a(43),S=a.n(v),N=(new Date).toLocaleString("ru",{day:"numeric",month:"long",year:"numeric"}),w=(new Date).toLocaleString("ru",{day:"numeric",month:"long",weekday:"short"});function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=Math.random()*(t-e)+e;return Math.round(Date.parse(new Date)+a)}var y=function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},k=function(){return Object(b.jsx)("div",{className:S.a.title,children:Object(b.jsx)("h1",{className:S.a.text,children:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f, ".concat(N)})})},E=a(36),L=a.n(E),C=a(51),B=a.n(C),F=a(93),D=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(F.a,{color:"secondary",className:B.a.filter,placeholder:"\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e",onInput:e.filterRequest})})},R=a(20),A=a(39),M=a.n(A),q=a(76),P=a(92),U=o.a.memo((function(e){var t=Object(s.useState)([]),a=Object(R.a)(t,2),o=a[0],n=a[1];Object(s.useEffect)((function(){n([{name:"all",text:"\u0412\u0421\u0415"},{name:"active",text:"\u0410\u041a\u0422\u0418\u0412\u041d\u042b\u0415"},{name:"done",text:"\u0412\u042b\u041f\u041e\u041b\u041d\u0415\u041d\u041d\u042b\u0415"}])}),[]);var i=Object(s.useState)([]),d=Object(R.a)(i,2),c=d[0],r=d[1];Object(s.useEffect)((function(){var t=e.todos.length,a=e.todos.filter((function(e){return!e.completed})).length;r([t,a,t-a])}),[e.todos]);var l=o.map((function(t,a){var s=t.name,o=t.text,n=e.activeSortInput===s;return Object(b.jsx)(q.a,{className:"".concat(M.a.button," ").concat(n?M.a.active:""),onClick:function(){return!n&&e.switchName(s)},children:Object(b.jsxs)("span",{children:[o," ",Object(b.jsx)("sup",{className:M.a.sup,children:"[".concat(c[a],"]")})]})},s)}));return Object(b.jsx)(P.a,{children:l})})),G=a(40),H=a.n(G),z=function(e){var t=e.todos,a=e.filteredTodos,s=e.filterRequest,o=e.addTodo,n=e.activeSortInput,i=e.switchName;return Object(b.jsxs)("div",{className:H.a.inputs,children:[Object(b.jsxs)("div",{className:H.a.wrapper,children:[Object(b.jsx)(D,{filteredTodos:a,filterRequest:s}),Object(b.jsx)(q.a,{variant:"contained",className:H.a.add,onClick:o,children:"+"})]}),Object(b.jsx)(U,{activeSortInput:n,switchName:i,todos:t})]})},J=a(13),K=a.n(J),W=function(e){var t=e.todo,a=t.id,n=t.title,i=t.text,d=t.completed,c=t.completedDate,r=t.important,l=t.tags,u=Object(s.useState)(!1),h=Object(R.a)(u,2),g=h[0],m=h[1],j={bar:{backgroundColor:d?"#55B833":"#DB4242"},item:{filter:d&&"none",border:d&&"1px solid #55B833",backgroundColor:r?"#db4242":"#FFF"},content:{opacity:d&&.45,title:{textDecoration:d&&"line-through"}},settings:{edit:{background:"url(images/edit.png) no-repeat center center / cover"},done:{background:"url(images/done.png) no-repeat center center / cover"},important:{background:"url(images/important.png) no-repeat center center / cover"},delete:{background:"url(images/trash.png)no-repeat center center / cover"}}};return Object(b.jsxs)("li",{className:K.a.item,style:j.item,children:[Object(b.jsx)("div",{className:K.a.status,children:Object(b.jsx)("div",{className:K.a.bar,style:j.bar})}),Object(b.jsxs)("div",{className:K.a.main,children:[Object(b.jsxs)("div",{className:K.a.content,style:j.content,children:[Object(b.jsxs)("div",{className:"top",onClick:function(){return i&&void m(!g)},children:[Object(b.jsx)("h2",{className:K.a.title,style:j.content.title,children:n}),l&&Object(b.jsx)("ul",{className:K.a.tags,children:l.map((function(e,t){return Object(b.jsx)("li",{className:K.a.tag,children:e},t)}))})]}),g&&Object(b.jsxs)("div",{className:K.a.bottom,children:[Object(b.jsx)("div",{className:K.a.line}),Object(b.jsx)("div",{className:K.a.text,children:i})]})]}),Object(b.jsxs)("ul",{className:K.a.settings,children:[!d&&Object(b.jsxs)(o.a.Fragment,{children:[Object(b.jsx)("li",{className:K.a.setting,style:j.settings.edit,onClick:function(){e.toggleEdit(a)}}),Object(b.jsx)("li",{className:K.a.setting,style:j.settings.done,onClick:function(){e.doneTodo(a)}}),Object(b.jsx)("li",{className:"".concat(K.a.setting," ").concat(K.a.important),style:j.settings.important,onClick:function(){e.toggleImportant(a)}})]}),d&&Object(b.jsx)("li",{className:K.a.date,children:Object(b.jsxs)("span",{children:["\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e: ",c]})}),Object(b.jsx)("li",{className:K.a.setting,style:j.settings.delete,onClick:function(){e.deleteTodo(a)}})]})]})]})},Y=function(e){var t=e.state,a=t.todos,s=t.req,o=t.activeSortInput,n=e.filteredTodos(e.switchSort(o),s);return Object(b.jsxs)("div",{className:L.a.list,children:[Object(b.jsx)(z,{activeSortInput:o,switchName:e.switchName,filterRequest:e.filterRequest,filteredTodos:e.filteredTodos,addTodo:e.addTodo,todos:a}),Object(b.jsx)("ul",{className:L.a.list,children:n.map((function(t){return Object(b.jsx)(W,{todo:t,toggleEdit:e.toggleEdit,doneTodo:e.doneTodo,deleteTodo:e.deleteTodo,toggleImportant:e.toggleImportant},t.id)}))}),e.isLoading&&Object(b.jsx)("div",{className:L.a.loading,children:Object(b.jsx)("img",{src:"images/loading.gif",alt:"loading__icon"})}),!a.length&&!e.isLoading&&Object(b.jsx)("span",{className:L.a.recommend,children:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443"})]})},Z=function(e){return Object(b.jsxs)("section",{className:x.a.content,children:[Object(b.jsx)(k,{}),Object(b.jsx)(Y,{state:e.state,isLoading:e.isLoading,toggleImportant:e.toggleImportant,doneTodo:e.doneTodo,addTodo:e.addTodo,deleteTodo:e.deleteTodo,toggleEdit:e.toggleEdit,switchName:e.switchName,switchSort:e.switchSort,filterRequest:e.filterRequest,filteredTodos:e.filteredTodos})]})},X=a(12),Q=a.n(X),V=function(e){var t=e.todo,a=e.updateTitle,o=e.updateTags,n=e.deleteTag,i=e.updateTextarea,d=e.closeTodoSide,c=e.deleteTodo,r=Object(s.useState)(!1),l=Object(R.a)(r,2),u=l[0],h=l[1],g=Object(s.useRef)(null);Object(s.useEffect)((function(){g.current.focus()}),[]);var m=Object(s.useState)(t.title),j=Object(R.a)(m,2),p=j[0],_=j[1];Object(s.useEffect)((function(){window.addEventListener("click",T);var e=document.getElementById("textarea");return e.style.height="".concat(e.scrollHeight,"px"),function(){window.removeEventListener("click",T)}}));var T=function(e){var s=document.getElementById("title");!e.path.includes(s)&&t.title!==p&&a(p)},f=t.tags,O=t.text;return Object(b.jsxs)("div",{className:Q.a.side,children:[Object(b.jsxs)("div",{className:Q.a.heading,children:[Object(b.jsx)("div",{className:"status",children:Object(b.jsx)("div",{className:Q.a.bar})}),Object(b.jsx)("div",{className:Q.a.wrapper,children:Object(b.jsx)("input",{type:"text",id:"title",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",ref:g,className:Q.a.title,value:p,onInput:function(e){_(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&t.title!==p&&(a(p),e.target.blur())}})})]}),Object(b.jsxs)("div",{className:Q.a.tags,children:[Object(b.jsx)("div",{className:"icon",children:Object(b.jsx)("img",{className:Q.a.tagIcon,src:"./images/tag.png",alt:"icon"})}),Object(b.jsxs)("ul",{className:Q.a.list,children:[f&&f.map((function(e,t){return Object(b.jsxs)("li",{className:Q.a.tag,children:[e,Object(b.jsxs)("div",{className:Q.a.cross,onClick:function(){return n(t)},children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{})]})]},e)})),Object(b.jsx)("input",{type:"text",className:Q.a.inputAddTag,placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0435\u0433",onKeyDown:function(e){"Enter"===e.key&&(o(e.target.value),e.target.value="",e.target.blur())}})]})]}),Object(b.jsxs)("div",{className:Q.a.text,children:[Object(b.jsx)("textarea",{name:"text",id:"textarea",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",className:Q.a.textarea,value:O,onChange:function(e){!u&&h(!0),i(e.target.value),e.target.style.height="auto",e.target.style.height="".concat(e.target.scrollHeight,"px")}}),Object(b.jsx)("div",{className:Q.a.update,children:u&&Object(b.jsxs)("span",{children:["\u0414\u0430\u0442\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f: ",w]})})]}),Object(b.jsxs)("div",{className:Q.a.options,children:[Object(b.jsx)("div",{className:Q.a.close,onClick:d,children:Object(b.jsx)("img",{className:Q.a.closeArrow,src:"./images/close.png",alt:"close__icon"})}),Object(b.jsx)("div",{className:Q.a.added,children:Object(b.jsxs)("span",{className:"dateAddedText",children:["\u0421\u043e\u0437\u0434\u0430\u043d\u043e:",t.dateOfCreate]})}),Object(b.jsx)("div",{className:Q.a.delete,onClick:function(){return c(t.id)},children:Object(b.jsx)("img",{className:Q.a.trash,src:"./images/trash.png",alt:"trash__icon"})})]})]})},$=a(31),ee=a.n($),te=function(e){var t=e.toggleForms,a=e.handleSignIn,o=e.errorMessage,n=e.email,i=e.password,d=e.handleEmail,c=e.handlePassword,r=Object(s.useState)(!0),l=Object(R.a)(r,2),u=l[0],h=l[1];return Object(s.useEffect)((function(){y(n)&&i.length>=6?h(!1):h(!0)}),[n,i]),Object(b.jsxs)("form",{className:ee.a.login,children:[Object(b.jsx)("input",{type:"text",placeholder:"\u043b\u043e\u0433\u0438\u043d (\u043f\u043e\u0447\u0442\u0430)",value:n,onChange:d}),Object(b.jsx)("input",{type:"password",placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c",value:i,onChange:c}),o&&Object(b.jsx)("span",{className:ee.a.error,children:o}),Object(b.jsx)("button",{className:ee.a.button,onClick:a,disabled:u,children:"\u0412\u043e\u0439\u0442\u0438"}),Object(b.jsxs)("p",{className:ee.a.message,children:["\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?",Object(b.jsx)("span",{className:ee.a.create,onClick:t,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})]})},ae=a(25),se=a.n(ae),oe=function(e){var t=e.username,a=e.email,o=e.password,n=e.handleUsername,i=e.handleEmail,d=e.handlePassword,c=e.handleReg,r=e.toggleForms,l=Object(s.useState)(!0),u=Object(R.a)(l,2),h=u[0],g=u[1];return Object(s.useEffect)((function(){y(a)&&o.length>=6?g(!1):g(!0)}),[t,a,o]),Object(b.jsxs)("form",{className:se.a.login,children:[Object(b.jsx)("input",{type:"text",placeholder:"\u0438\u043c\u044f",value:t,className:se.a.username,onChange:n}),Object(b.jsx)("input",{type:"text",className:se.a.email,placeholder:"\u043b\u043e\u0433\u0438\u043d (\u043f\u043e\u0447\u0442\u0430)",value:a,onChange:i}),Object(b.jsx)("input",{type:"password",className:se.a.password,placeholder:"\u043f\u0430\u0440\u043e\u043b\u044c",value:o,onChange:d}),Object(b.jsx)("span",{className:se.a.symbols,children:"\u043d\u0435 \u043c\u0435\u043d\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"}),Object(b.jsx)("button",{className:se.a.button,onClick:c,disabled:h,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(b.jsxs)("p",{className:se.a.message,children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",Object(b.jsx)("span",{className:se.a.create,onClick:r,children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},ne=function(e){var t=e.handleReg,a=e.handleSignIn,o=e.errorMessage,n=e.username,i=e.email,d=e.password,c=e.handleUsername,r=e.handleEmail,l=e.handlePassword,u=Object(s.useState)(!0),h=Object(R.a)(u,2),g=h[0],m=h[1],j=function(){m((function(e){return!e}))};return Object(b.jsx)(b.Fragment,{children:g?Object(b.jsx)(te,{toggleForms:j,handleSignIn:a,errorMessage:o,email:i,password:d,handleEmail:r,handlePassword:l}):Object(b.jsx)(oe,{toggleForms:j,username:n,email:i,password:d,handleUsername:c,handleEmail:r,handlePassword:l,handleReg:t})})},ie=a(58).a.initializeApp({apiKey:"AIzaSyBP4FoOr_eB_cholz-C_Ggvw59YygsT0LU",authDomain:"todo-react-fec8c.firebaseapp.com",projectId:"todo-react-fec8c",storageBucket:"todo-react-fec8c.appspot.com",messagingSenderId:"547977145058",appId:"1:547977145058:web:152d29b7f48eb6ed5fccbb"}),de=function(e){Object(h.a)(a,e);var t=Object(g.a)(a);function a(){var e;return Object(r.a)(this,a),(e=t.call(this)).handleUsername=function(t){e.setState({username:t.target.value})},e.handleEmail=function(t){e.setState({email:t.target.value})},e.handlePassword=function(t){e.setState({password:t.target.value})},e.handleReg=function(t){var a=e.state,s=a.email,o=a.password;t.preventDefault(),ie.auth().createUserWithEmailAndPassword(s,o).then((function(t){t.user.updateProfile({displayName:e.state.username})}))},e.handleSignIn=function(t){t.preventDefault();var a=e.state,s=a.email,o=a.password;e.setState({todos:[]}),ie.auth().signInWithEmailAndPassword(s,o).then((function(t){t.user?e.setState({isAuth:!0}):console.log("\u043d\u0435\u0430")})).catch((function(t){switch(console.log(t),t.code){case"auth/invalid-email":e.setState({errorMessage:"\u041d\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d(\u043f\u043e\u0447\u0442\u0430)"});break;case"auth/user-not-found":e.setState({errorMessage:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"});break;case"auth/wrong-password":e.setState({errorMessage:"\u041d\u0435 \u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c"});break;default:return console.log(t.code)}}))},e.handleLogout=function(){ie.auth().signOut(),e.setState({username:"",email:"",password:"",isAuth:!1})},e.state={username:"",email:"",password:"",todos:[],activeSortInput:"all",req:"",edit:!1,currentEditedTodoByIdx:null,isAuth:!1,errorMessage:"",isLoading:!1},e.addTodo=e.addTodo.bind(Object(u.a)(e)),e.doneTodo=e.doneTodo.bind(Object(u.a)(e)),e.deleteTodo=e.deleteTodo.bind(Object(u.a)(e)),e.toggleEdit=e.toggleEdit.bind(Object(u.a)(e)),e.updateTitle=e.updateTitle.bind(Object(u.a)(e)),e.updateTags=e.updateTags.bind(Object(u.a)(e)),e.updateTextarea=e.updateTextarea.bind(Object(u.a)(e)),e.deleteTag=e.deleteTag.bind(Object(u.a)(e)),e.toggleImportant=e.toggleImportant.bind(Object(u.a)(e)),e.switchName=e.switchName.bind(Object(u.a)(e)),e.switchSort=e.switchSort.bind(Object(u.a)(e)),e.filterRequest=e.filterRequest.bind(Object(u.a)(e)),e.filteredTodos=e.filteredTodos.bind(Object(u.a)(e)),e.closeTodoSide=e.closeTodoSide.bind(Object(u.a)(e)),e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;ie.auth().onAuthStateChanged((function(t){if(t){e.setState({isAuth:!0,email:t.email,isLoading:!0});var a=ie.auth().currentUser.uid;ie.database().ref("users/".concat(a,"/todos")).once("value").then((function(t){if(t.exists()){var a=[];t.forEach((function(e){var t=e.val();a.push(t)})),e.setState({todos:a,isLoading:!1})}else e.setState({isLoading:!1})}))}}))}},{key:"pushTodosToFirebase",value:function(){var e=ie.auth().currentUser.uid;ie.database().ref("users/".concat(e)).set({todos:this.state.todos})}},{key:"getFullDate",value:function(){return(new Date).toLocaleString("ru",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"})}},{key:"toggleImportant",value:function(e){var t=Object(c.a)(this.state.todos),a=t.findIndex((function(t){return t.id===e}));t[a].important=!t[a].important,this.setState(t),this.pushTodosToFirebase()}},{key:"doneTodo",value:function(e){var t=Object(c.a)(this.state.todos),a=t.findIndex((function(t){return t.id===e})),s=t[a];s.completed=!0,s.important=!1,s.completedDate=this.getFullDate(),t=[].concat(Object(c.a)(t.slice(0,a)),Object(c.a)(t.slice(a+1)),[s]),this.setState({todos:t}),this.pushTodosToFirebase(),this.state.edit&&this.setState({edit:!1})}},{key:"addTodo",value:function(){var e=this;this.setState({todos:[{id:I(),title:"",text:"",important:!1,completed:!1,completedDate:"",dateOfCreate:w}].concat(Object(c.a)(this.state.todos))},(function(){var t=e.state.todos[0].id;e.toggleEdit(t,"addTodo"),e.pushTodosToFirebase()}))}},{key:"deleteTodo",value:function(e){var t=this;console.log(e),this.setState({todos:this.state.todos.filter((function(t){return t.id!==e}))},(function(){t.pushTodosToFirebase()})),this.state.edit&&this.setState({edit:!1})}},{key:"toggleEdit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(c.a)(this.state.todos),s=a.findIndex((function(t){return t.id===e}));!this.state.edit||t?this.setState({edit:!0,currentEditedTodoByIdx:s}):s===this.state.currentEditedTodoByIdx?this.setState({edit:!1}):this.state.edit&&s!==this.state.currentEditedTodoByIdx&&this.setState({currentEditedTodoByIdx:s})}},{key:"updateTitle",value:function(e){var t=Object(c.a)(this.state.todos);t[this.state.currentEditedTodoByIdx].title=e,this.setState({todos:t}),this.pushTodosToFirebase()}},{key:"updateTags",value:function(e){var t=this.state.currentEditedTodoByIdx,a=Object(d.a)({},this.state.todos[t]);a.tags||(a.tags=[]),a.tags.push(e),this.setState({todos:[].concat(Object(c.a)(this.state.todos.slice(0,t)),[a],Object(c.a)(this.state.todos.slice(t+1)))}),this.pushTodosToFirebase()}},{key:"deleteTag",value:function(e){var t=this,a=this.state.currentEditedTodoByIdx,s=Object(d.a)({},this.state.todos[a]),o=s.tags.filter((function(t,a){return a!==e}));this.setState({todos:[].concat(Object(c.a)(this.state.todos.slice(0,a)),[Object(d.a)(Object(d.a)({},s),{},{tags:o})],Object(c.a)(this.state.todos.slice(a+1)))},(function(){return t.pushTodosToFirebase()}))}},{key:"updateTextarea",value:function(e){var t=this,a=this.state.currentEditedTodoByIdx,s=Object(d.a)({},this.state.todos[a]);this.setState({todos:[].concat(Object(c.a)(this.state.todos.slice(0,a)),[Object(d.a)(Object(d.a)({},s),{},{text:e})],Object(c.a)(this.state.todos.slice(a+1)))},(function(){return t.pushTodosToFirebase()}))}},{key:"closeTodoSide",value:function(){this.setState({edit:!1})}},{key:"switchName",value:function(e){this.setState({activeSortInput:e})}},{key:"switchSort",value:function(e){switch(e){case"all":return this.state.todos;case"active":return Object(c.a)(this.state.todos.filter((function(e){return!e.completed})));case"done":return Object(c.a)(this.state.todos.filter((function(e){return e.completed})));default:return this.state.todos}}},{key:"filterRequest",value:function(e){var t=e.target.value;this.setState({req:t})}},{key:"filteredTodos",value:function(e,t){return""===t?e:e.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}))}},{key:"render",value:function(){var e=this.state,t=e.currentEditedTodoByIdx,a=e.isAuth,s=e.errorMessage,o=e.username,n=e.email,i=e.password,d=e.isLoading,c=this.state.edit&&Object(b.jsx)(V,{todo:this.state.todos[t],currentEditedTodoByIdx:t,updateTitle:this.updateTitle,updateTags:this.updateTags,deleteTag:this.deleteTag,updateTextarea:this.updateTextarea,closeTodoSide:this.closeTodoSide,deleteTodo:this.deleteTodo},this.state.todos[t].id);return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(p,{isAuth:a,handleLogout:this.handleLogout,email:n}),Object(b.jsxs)("main",{className:"main",children:[Object(b.jsx)(f,{}),a?Object(b.jsx)(Z,{state:this.state,isLoading:d,toggleImportant:this.toggleImportant,doneTodo:this.doneTodo,addTodo:this.addTodo,deleteTodo:this.deleteTodo,toggleEdit:this.toggleEdit,switchName:this.switchName,switchSort:this.switchSort,filterRequest:this.filterRequest,filteredTodos:this.filteredTodos}):Object(b.jsx)(ne,{username:o,email:n,password:i,handleUsername:this.handleUsername,handleEmail:this.handleEmail,handlePassword:this.handlePassword,handleReg:this.handleReg,handleSignIn:this.handleSignIn,errorMessage:s})]}),c]})}}]),a}(o.a.Component);i.a.render(Object(b.jsx)(de,{}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.93ce5022.chunk.js.map